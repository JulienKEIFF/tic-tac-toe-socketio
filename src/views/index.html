<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="components/home.js"></script>
    <script src="components/game.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <title>Tic Tac Toe</title>
</head>
<body class="p-5">
<div id="app">
    <home-view v-if="home" @join="changeState" @create="create = true"></home-view>
    <game-view v-if="!home" @back="changeState"></game-view>
</div>
</body>
<script>
    const socket = io();
    const vm = new Vue({
        el: "#app",
        data() {
            return {
                home: true,
                username: "test",
                roomID: 12254,
                create: false
            }
        },
        methods: {
            changeState: function (event) {
                console.log(event)
                this.home = !this.home;
                if (!this.home && this.checkInfos() ) {
                    socket.emit('join', {username: event.username, room: event.gameID});
                }
            },
            checkInfos: function() {
                if(this.create){
                    if(typeof this.username !== null ) return true
                    else return false
                }else{
                    if(typeof this.username !== null && typeof this.gameID !== null) return true
                    else return false
                }
            }
        },
        mounted: function () {

        }
    })
</script>
</html>